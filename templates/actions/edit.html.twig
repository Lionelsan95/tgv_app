{% extends 'base.html.twig' %}

{% block title %}Edit Actions{% endblock %}

{% block body %}

    <div class="row">
        <div class="col-xs-12 col-xl-8 offset-xl-1 w-100 sup-frame p-5">
            <a href="{{ path('actions_index') }}">List</a>
            <div class="d-flex justify-content-between align-items-center mb-5 color-first-color">
                <h1 class="color-third-color"><i class="fas fa-hashtag color-third-color"></i> Edit action</h1>
                <div class="d-flex">
                    <button id="editAction" type="submit" class="btn color-first-color d-flex justify-content-between align-items-center">
                                        <span class="fa-stack" style="vertical-align: top;">
                                          <i class="fas fa-circle fa-stack-2x"></i>
                                          <i class="fas fa-check fa-stack-1x fa-inverse"></i>
                                        </span>
                        Update
                    </button>
                    <button type="submit" id="delAction" class="btn color-first-color d-flex justify-content-between align-items-center">
                                        <span class="fa-stack" style="vertical-align: top;">
                                          <i class="fas fa-circle fa-stack-2x"></i>
                                          <i class="fas fa-times fa-stack-1x fa-inverse"></i>
                                        </span>
                        Delete
                    </button>
                </div>

            </div>

            <form id="formEditAction" method="post" action="{{ path('actions_edit',{'id':action.id}) }}">
                <div class="container-fluid inf-frame">
                    <div class="row">
                        <div class="col-xs-12 col-sm-6 w-100">
                            <div class="row">
                                <div class="col-6 d-flex flex-column mb-3">
                                    <label for="actions_nom" class="mb-1">Name :</label>
                                    <input id="actions_nom"
                                           class="px-3"
                                           type="text"
                                           name="actions[nom]"
                                           value="{{ action.nom }}"
                                           required />
                                </div>
                                <div class="col-6 d-flex flex-column mb-3">
                                    <label for="actions_bonus" class="mb-1">Bonus :</label>
                                    <input id="actions_bonus"
                                           class="px-3"
                                           type="checkbox"
                                           name="actions[bonus]"
                                           value="{{ action.id }}" {% if action.bonus %}checked="checked"{% endif %}
                                           required/>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6 d-flex flex-column mb-3">
                                    <label for="actions_prix" class="mb-1">Value :</label>
                                    <input id="actions_prix"
                                           class="px-3"
                                           type="number"
                                           step="0.01"
                                           min="0"
                                           name="actions[prix]"
                                           required value="{{ action.prix }}" />
                                </div>
                                {{ form_row(form._token) }}
                            </div>

                        </div>
                    </div>
                </div>

            </form>

        </div>
    </div>

{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        $(document).ready(function(){
            $("#editAction").on('click', function(e){
                e.preventDefault();
                $("#formEditAction").submit();
            });
            $("#delAction").on('click', function(e){
                e.preventDefault();
                $.ajax({
                    url: '{{ path('actions_delete', {'id': action.id}) }}?'+ $.param({
                        "_token": "{{ csrf_token('delete' ~ action.id) }}",
                        "_method": "DELETE"
                    }),
                    type: 'DELETE',
                    success: function(result) {
                        console.log(result);
                    },
                    error: function(result){
                        console.log('error');
                        console.log(resut);
                    }
                });
            })
        })
    </script>
{% endblock %}